/* Typography
==========

A really nice typographic system based on concepts taken from
[typeplate](http://typeplate.com) and
[typecast](http://typecast.com/blog/contrast-through-scale).

*/
$primary-font : "helvetica neue", helvetica, sans-serif;
$font-weight : normal !default;
$line-height : $ratio !default;
$font-size : 112.5 !default; // percentage value (16 * 112.5% = 18px)
$font-base : 16 * ($font-size/100) !default; // converts our percentage to a pixel value
$measure: $font-base * $line-height;

$tera: 117 !default; // 117 = 18 × 6.5
$giga: 90 !default; // 90 = 18 × 5
$mega: 72 !default; // 72 = 18 × 4
$alpha: 60 !default; // 60 = 18 × 3.3333
$beta: 48 !default; // 48 = 18 × 2.6667
$gamma: 36 !default; // 36 = 18 × 2
$delta: 24 !default; // 24 = 18 × 1.3333
$epsilon: 21 !default; // 21 = 18 × 1.1667
$zeta: 18 !default; // 18 = 18 × 1

$type-scale-unit-value: em !default;

/* Mixins
==========

These mixins are used by the sass file to generate the font sizes
and calculate the line-heights

Context Calculator
----------

Divide a given font-size by base font-size & return a relative value

*/

@function context-calc($scale, $base, $value) {
    @return ($scale/$base)#{$value};
}

/* Measure Margin
----------

Divide 1 unit of measure by given font-size & return a relative em value

*/

@function measure-margin($scale, $measure, $value) {
    @return ($measure/$scale)#{$value};
}

/* Type-Scale
----------

Provides a pixel fallback if you decide to use 'rems' as a unit over ems.

*/

@mixin type-scale($scale, $base, $value, $measure:"") {
    // If 'rem' is used as a $value then provide a px fallback.
    @if $value == rem {
        font-size: $scale#{px};
    }
    font-size: context-calc($scale, $base, $value);
    @if $measure != "" {
        margin-bottom: measure-margin($scale, $measure, $value);
    }
}

/* Headings
==========

Basic heading sizes in the style of [@csswizardry](http://csswizardry.com).

    <h1>Heading 1</h1>
    <h2>Heading 2</h2>
    <h3>Heading 3</h3>
    <h4>Heading 4</h4>
    <h5>Heading 5</h5>
    <h6>Heading 6</h6>

*/
%hN {
    text-rendering: optimizeLegibility; // voodoo to enable ligatures and kerning
    line-height: 1; // this fixes huge spaces when a heading wraps onto two lines
    margin-top: 0;
    font-weight: bold;
}

$sizes: tera $tera, giga $giga, mega $mega, alpha $alpha, beta $beta, gamma $gamma, delta $delta, epsilon $epsilon, zeta $zeta;

@each $size in $sizes {
    .#{nth($size, 1)} {
        @include type-scale(nth($size, 2), $font-base, '#{$type-scale-unit-value}', $measure);
    }
}

h1 {
    @extend .alpha;
    @extend %hN;
}

h2 {
    @extend .beta;
    @extend %hN;
}

h3 {
    @extend .gamma;
    @extend %hN;
}

h4 {
    @extend .delta;
    @extend %hN;
}

h5 {
    @extend .epsilon;
    @extend %hN;
}

h6 {
    @extend .zeta;
    @extend %hN;
}

/* Ampersand
==========

Some fancy pants CSS to make ampersands look
[totes amazeballs](http://www.artrocker.tv/images/uploads/Totes_Amazeballs.jpg).
You can either call it in the HTML by adding a class of `.ampersand` ir you can
extend it in SASS.

    <h1 class="ampersand">Frank & beans</h1>
    <p class="ampersand">
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras ac est tristique & turpis tincidunt dictum nec eu elit. Sed eget varius mi, aliquet <a href="#">rutrum & nibh.</a>
    </p>

*/
$amp-fontface-name: Ampersand !default;
$amp-fontface-source: local('Georgia'), local('Garamond'), local('Palatino'), local('Book Antiqua') !default;
$amp-fontface-fallback: local('Georgia') !default;
$amp-font-family: Verdana, sans-serif !default;

@font-face {
    font-family: '#{$amp-fontface-name}';
    src: $amp-fontface-source;
    unicode-range: U+0026;
}

@font-face {
    font-family: '#{$amp-fontface-name}';
    src: $amp-fontface-fallback;
    unicode-range: U+270C;
}

@mixin ampersand($amp-font-family...) {
    font-family: $amp-font-family;
}

.ampersand {
    @include ampersand($amp-fontface-name, $amp-font-family);
}